pipeline {
    agent { dockerfile true }    
    stages {
        stage('Construção'){
            steps{
                checkout scm   
                sh 'composer install'             
                sh 'docker ps'
            }
        }
        
        stage('Testes Unitários') {
            steps {                
                sh 'php artisan test --coverage'          
            }
        }
    }
}